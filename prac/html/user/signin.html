<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>Log in</title>
        <link rel="stylesheet" href="/prac/css/utils.css">
        <link rel="stylesheet" href="/prac/css/login.css">
        <script src="/prac/js/utils.js"></script> 
        <script src="/prac/js/user.js"></script> 
    </head>
    <body>
        

        <div id="header"></div>
        <section>
            <div class="mainContainer">
                <div class="loginContainer">
                    <div class="span-text">회원가입</div>
                    <div>
                        <div class="input-area">
                            <div class="input-title">프로필 사진</div>
                            <div class="helper-text"></div>
                            <button class="profile-button">
                                ╋
                            </button>
                        </div>
    
                        <div class="input-area">
                            <div class="input-title">이메일 *</div>
                            <input id="signin-input-email" type="text" class="input-text" placeholder="이메일을 입력하세요">
                            <div class="helper-text"></div>
                        </div>
                        <div class="input-area">
                            <div class="input-title">비밀번호 *</div>
                            <input id="signin-input-password" type="password" class="input-text" placeholder="비밀번호를 입력하세요">
                            <div class="helper-text"></div>
                        </div>
                        <div class="input-area">
                            <div class="input-title">비밀번호 확인 *</div>
                            <input id="signin-input-repassword" type="password" class="input-text" placeholder="비밀번호를 한번 더 입력하세요">
                            <div class="helper-text"></div>
                        </div>
                        <div class="input-area">
                            <div class="input-title">닉네임 *</div>
                            <input id="signin-input-nickname" type="text" class="input-text" placeholder="닉네임을 입력하세요">
                            <div class="helper-text"></div>
                        </div>
                    </div>
                    <div class="login-button">
                        <button class="button-util" width="">회원가입</button>
                    </div>
                    <div style="text-align: center; margin-left: 10px; width: 100%;">
                        <a href="#" class="login-signin">로그인하러 가기</a>
                    </div>
                </div>
            </div>
        </section>

        <script>

            // 이메일 입력
            document.getElementById("signin-input-email").addEventListener("blur", function (e) {
                const emailInput = this.value;
                
                // 이메일 유효성 검사 정규식
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (emailInput === "") {
                    helperElement.textContent += "이메일을 입력해주세요.";
                } else if (!emailRegex.test(emailInput)) {
                    helperElement.textContent += "올바른 이메일 주소 형식을 입력해주세요. (예: example@example.com)";
                } else if(false) { // 중복된 이메일인 경우
                    helperElement.textContent += "중복된 이메일 입니다.";
                } else {
                    helperElement.style.display = "none";
                }

            });

            // 비밀번호 입력
            document.getElementById("signin-input-password").addEventListener("blur", function (e) {
                const passwordInput = this.value;

                // 비밀번호 유효성 검사 정규식
                const passwordRegex = /(?=.*?[a-z])(?=.*?[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*?_]).{8,20}$/;
                if(passwordInput == "") {
                    helperElement.textContent += "비밀번호를 입력해주세요.";
                } else if (!passwordRegex.test(passwordInput)) {
                    helperElement.textContent += "비밀번호는 8자 이상, 20자 이하이며, 대문자, 소문자, 숫자, 특수문자를 각각 최소 1개 포함해야 합니다.";
                } else {
                    helperElement.style.display = "none";
                }

                document.getElementById("signin-input-password").parentNode.appendChild(helperElement);
            });

            // 비밀번호 확인 입력
            document.getElementById("signin-input-repassword").addEventListener("blur", function (e) {
                const repasswordInput = this.value;

                // 비밀번호 유효성 검사 정규식
                const passwordRegex = /(?=.*?[a-z])(?=.*?[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*?_]).{8,20}$/;
                if(repasswordInput == "") {
                    helperElement.textContent += "비밀번호를 한번더 입력해주세요.";
                } else if (repasswordInput != document.getElementById("signin-input-password").value) {
                    helperElement.textContent += "비밀번호가 다릅니다.";
                } else {
                    helperElement.style.display = "none";
                }

                document.getElementById("signin-input-repassword").parentNode.appendChild(helperElement);
            });

            // 닉네임 입력
            document.getElementById("signin-input-nickname").addEventListener("blur", function (e) {
                const nicknameInput = this.value;

                const nicknameSpaceRegex = /\s/g;
                if(nicknameInput == "") {
                    helperElement.textContent += "닉네임을 입력해주세요.";
                } else if (!nicknameSpaceRegex.test(nicknameInput)) {
                    helperElement.textContent += "띄어쓰기를 없애주세요.";
                } else if(false) { // 중복된 닉네임인 경우
                    helperElement.textContent += "중복된 닉네임 입니다.";
                } else if(nicknameInput.length > 10) {
                    helperElement.textContent += "닉네임은 최대 10자 까지 작성 가능합니다.";
                } else {
                    helperElement.style.display = "none";
                }

                document.getElementById("signin-input-nickname").parentNode.appendChild(helperElement);
            });
        
        </script>
    </body>
</html>